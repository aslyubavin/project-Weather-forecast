"use strict";window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__logo"),t=document.querySelector(".search__wrapper"),r=document.querySelector(".search__title"),n=document.querySelector(".search__subtitle"),a=document.querySelector(".search__form"),o=document.querySelector(".search__input"),c=document.querySelector(".search__button"),i=document.querySelector(".search__photo"),l=document.querySelector(".weather"),d=document.querySelector(".forecast"),u=document.querySelector(".forecast-daily"),s=document.querySelector(".forecast-daily-day__button"),y=document.querySelector(".forecast-daily-hour__button"),m=document.querySelector(".forecast-weekly__button"),h=document.querySelector(".forecast-weekly__long"),_=document.querySelector(".daylength");function f(e,t){e.classList.remove("op-0"),e.classList.add(t)}function g(e){e.addEventListener("click",(()=>{u.classList.toggle("forecast-daily_active"),s.classList.toggle("button_active"),y.classList.toggle("button_active")}))}f(r,"op-1"),setTimeout(f,400,n,"op-1"),setTimeout(f,800,o,"op-1"),setTimeout(f,1200,c,"op-1"),setTimeout(f,1200,i,"op-1_img"),e.addEventListener("click",(()=>{t.classList.remove("search__wrapper_active"),l.classList.add("disN"),d.classList.add("disN"),_.classList.add("disN"),u.classList.remove("forecast-daily_active"),s.classList.add("button_active"),y.classList.remove("button_active"),h.classList.remove("forecast-weekly__long_active")})),g(y),g(s),m.addEventListener("click",(()=>{h.classList.toggle("forecast-weekly__long_active")})),a.addEventListener("submit",(e=>{var r;e.preventDefault(),r=o.value,fetch(`${S}weather?q=${r}&units=metric&appid=${p}`).then((e=>e.json())).then(w),a.reset(),t.classList.add("search__wrapper_active"),l.classList.remove("disN"),d.classList.remove("disN"),_.classList.remove("disN")}));const p="c04385b4f6f09f048e333ea817afc1ca",S="https://api.openweathermap.org/data/2.5/";function q(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function M(e){return e<10?`0${e}`:e}function w(e){let t,r=document.querySelector(".weather__main-city"),n=document.querySelector(".weather__main-date"),a=document.querySelector(".weather__main-temp"),o=document.querySelector(".weather__main-icon"),c=document.querySelector(".weather__main-descr"),i=document.querySelector(".weather__main-feel"),l=document.querySelector('[data-article="minmax"]'),u=document.querySelector('[data-article="humidity"]'),s=document.querySelector('[data-article="pressure"]'),y=document.querySelector('[data-article="wind"]'),m=document.querySelector(".daylength-photo"),f=e.timezone;const g=["January","February","March","April","May","June","July","August","September","October","November","December"];if(t=10800==f?new Date(1e3*e.dt):new Date(1e3*(e.dt+f-10800)),400==e.cod||404==e.cod)r.innerText="City not found",n.innerText="Enter the correct city",a.innerHTML="--&deg;",o.src="img/error-icon.svg",c.innerText="",i.innerHTML="",l.innerHTML="--",u.innerText="--",s.innerText="--",y.innerText="--",h.classList.remove("forecast-weekly__long_active"),d.style.opacity="0",d.style.visibility="hidden",_.style.opacity="0",_.style.visibility="hidden";else{let h;switch(d.style.opacity="1",d.style.visibility="visible",_.style.opacity="1",_.style.visibility="visible",r.innerText=e.name,n.innerText=`${g[t.getMonth()]} ${t.getDate()} ${t.getFullYear()} | ${M(t.getHours())}:${M(t.getMinutes())}`,a.innerHTML=`${Math.round(+e.main.temp)}&deg;`,o.src=`img/${e.weather[0].icon}-icon.svg`,c.innerText=q(e.weather[0].description),i.innerHTML=`Feels like ${Math.round(e.main.feels_like)}&deg;`,l.innerHTML=`${Math.round(+e.main.temp_min)}&deg; / ${Math.round(+e.main.temp_max)}&deg;`,u.innerText=`${e.main.humidity} %`,s.innerText=`${e.main.pressure} mb`,y.innerText=`${Math.round(e.wind.speed)} m/s`,e.weather[0].icon){case"01d":case"02d":h="01d";break;case"03d":case"04d":h="03d";break;case"09d":case"10d":h="09d";break;case"01n":case"02n":h="01n";break;case"03n":case"04n":h="03n";break;case"09n":case"10n":h="09n";break;default:h=e.weather[0].icon}m.style.backgroundImage=`url("img/${h}-bg.jpg")`,w=e.coord,fetch(`${S}onecall?lat=${w.lat}&lon=${w.lon}&units=metric&exclude=minutely&appid=${p}`).then((e=>e.json())).then($)}var w}function $(e){const t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=e.timezone_offset;function n(e){return 10800==r?new Date(1e3*e):new Date(1e3*(e+r-10800))}!function(){let t=document.querySelector('[data-temp="morning"]'),r=document.querySelector('[data-temp="afternoon"]'),n=document.querySelector('[data-temp="evening"]'),a=document.querySelector('[data-temp="night"]'),o=document.querySelector('[data-feel="morning"]'),c=document.querySelector('[data-feel="afternoon"]'),i=document.querySelector('[data-feel="evening"]'),l=document.querySelector('[data-feel="night"]');t.innerHTML=`${Math.round(e.daily[0].temp.morn)}&deg;`,r.innerHTML=`${Math.round(e.daily[0].temp.day)}&deg;`,n.innerHTML=`${Math.round(e.daily[0].temp.eve)}&deg;`,a.innerHTML=`${Math.round(e.daily[0].temp.night)}&deg;`,o.innerHTML=`${Math.round(e.daily[0].feels_like.morn)}&deg;`,c.innerHTML=`${Math.round(e.daily[0].feels_like.day)}&deg;`,i.innerHTML=`${Math.round(e.daily[0].feels_like.eve)}&deg;`,l.innerHTML=`${Math.round(e.daily[0].feels_like.night)}&deg;`}(),function(){let t=document.querySelectorAll(".forecast-daily-hour__time"),r=document.querySelectorAll(".forecast-daily-hour__temp"),a=document.querySelectorAll(".forecast-daily-hour__descr");t.forEach(((t,r)=>{t.innerText=`${n(e.hourly[r].dt).getHours()}:00`})),r.forEach(((t,r)=>{t.innerHTML=`${Math.round(e.hourly[r].temp)}&deg;`})),a.forEach(((t,r)=>{t.innerText=q(e.hourly[r].weather[0].main)}))}(),function(){let r=document.querySelectorAll(".forecast-weekly__date"),a=document.querySelectorAll(".forecast-weekly__temp-day"),o=document.querySelectorAll(".forecast-weekly__temp-night"),c=document.querySelectorAll(".forecast-weekly__icon");r.forEach(((r,a)=>{r.innerText=`${t[n(e.daily[a].dt).getDay()]} ${n(e.daily[a].dt).getDate()}`})),a.forEach(((t,r)=>{t.innerHTML=`${Math.round(e.daily[r].temp.day)}&deg;`})),o.forEach(((t,r)=>{t.innerHTML=`${Math.round(e.daily[r].temp.night)}&deg;`})),c.forEach(((t,r)=>{t.src=`img/${e.daily[r].weather[0].icon}-icon.svg`}))}(),function(){let r=document.querySelectorAll(".forecast-weekly__table-date"),a=document.querySelectorAll(".forecast-weekly__table-temp"),o=document.querySelectorAll(".forecast-weekly__table-icon img"),c=document.querySelectorAll(".forecast-weekly__table-humidity"),i=document.querySelectorAll(".forecast-weekly__table-pressure"),l=document.querySelectorAll(".forecast-weekly__table-wind"),d=document.querySelectorAll(".forecast-weekly__table-feel");r.forEach(((r,a)=>{r.innerText=`${t[n(e.daily[a].dt).getDay()]} ${n(e.daily[a].dt).getDate()}`})),a.forEach(((t,r)=>{t.innerHTML=`<span>${Math.round(e.daily[r].temp.day)}&deg;</span> / <span>${Math.round(e.daily[r].temp.night)}&deg;</span>`})),o.forEach(((t,r)=>{t.src=`img/${e.daily[r].weather[0].icon}-icon.svg`})),c.forEach(((t,r)=>{t.innerText=Math.round(e.daily[r].humidity)})),i.forEach(((t,r)=>{t.innerText=Math.round(e.daily[r].pressure)})),l.forEach(((t,r)=>{t.innerText=Math.round(e.daily[r].wind_speed)})),d.forEach(((t,r)=>{t.innerHTML=`${Math.round(e.daily[r].feels_like.day)}&deg;`}))}(),function(){let t=document.querySelector(".daylength-info__time_sunrise"),r=document.querySelector(".daylength-info__time_sunset"),a=document.querySelector(".daylength-info__duration");function o(e,t){let r,a;r=n(e).getHours(),a=n(e).getMinutes(),t.innerText=`${M(r)}:${M(a)}`}function c(){let t=new Date(1e3*e.current.sunrise),r=new Date(1e3*e.current.sunset);return{hours:Math.floor((r-t)/1e3/60/60),minutes:Math.floor((r-t)/1e3/60%60)}}o(e.current.sunrise,t),o(e.current.sunset,r),a.innerHTML=`<span>Daylength</span><br>${c().hours} hours ${c().minutes} minutes`}()}}));